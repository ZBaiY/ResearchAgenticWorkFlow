{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "paper_profile_v6",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "version": {"type": "string"},
    "task_id": {"type": "string"},
    "generated_at_utc": {"type": "string"},
    "source_files": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tex": {"type": "array", "items": {"type": "string"}},
        "bib": {"type": "array", "items": {"type": "string"}},
        "references_for_seeds": {"type": "array", "items": {"type": "string"}},
        "references_general": {"type": "array", "items": {"type": "string"}}
      },
      "required": ["tex", "bib", "references_for_seeds", "references_general"]
    },
    "profile": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "field": {"type": "string"},
        "field_confidence": {"type": "number"},
        "field_evidence_terms": {"type": "array", "items": {"type": "string"}},
        "keywords": {"type": "array", "items": {"type": "string"}},
        "bigrams": {"type": "array", "items": {"type": "string"}},
        "trigrams": {"type": "array", "items": {"type": "string"}},
        "structured_phrases": {"type": "array", "items": {"type": "string"}},
        "categories": {"type": "array", "items": {"type": "string"}},
        "short_blurb": {"type": "string"},
        "related_work_themes": {"type": "array", "items": {"type": "string"}},
        "seed_summary": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "found": {"type": "integer"},
            "ranked": {"type": "integer"},
            "emitted": {"type": "integer"},
            "min_required": {"type": "integer"},
            "status": {"type": "string", "enum": ["ok", "warn"]}
          },
          "required": ["found", "ranked", "emitted", "min_required", "status"]
        },
        "seed_papers": {
          "type": "array",
          "maxItems": 5,
          "items": {
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "title": {"type": "string"},
              "authors": {"type": "array", "items": {"type": "string"}},
              "arxiv_id": {"type": ["string", "null"]},
              "doi": {"type": ["string", "null"]},
              "link": {"type": "string"},
              "abstract": {"type": "string"},
              "year": {"type": ["integer", "null"]},
              "completeness": {"type": "string"},
              "score": {"type": "number"},
              "why_terms": {"type": "array", "items": {"type": "string"}}
            },
            "required": ["title", "authors", "completeness"]
          }
        },
        "warnings": {"type": "array", "items": {"type": "string"}}
      },
      "required": [
        "field",
        "field_confidence",
        "field_evidence_terms",
        "keywords",
        "bigrams",
        "trigrams",
        "structured_phrases",
        "categories",
        "short_blurb",
        "related_work_themes",
        "seed_summary",
        "seed_papers",
        "warnings"
      ]
    }
  },
  "required": ["version", "task_id", "generated_at_utc", "source_files", "profile"]
}
